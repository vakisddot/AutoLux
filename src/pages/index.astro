---
import Layout from "../layouts/Layout.astro";
import brands from "../content/brands.json";
import rawCars from "../content/cars.json";
import { fetchWikiImage } from "../utils/wiki";
import CarCard from "../components/CarCard.astro";
import HoverCard from "../components/HoverCard.astro";
import urls from "../content/urls.json";

const carsWithImages = await Promise.all(
  rawCars.slice(0, 3).map(async (car) => {
    const image = await fetchWikiImage(car.make, car.model);
    return { ...car, image };
  })
);

const values = [
	{
		icon: "ph-shield-check",
		title: "Проверена история",
		desc: "Всеки автомобил преминава през строга 360-градусова инспекция. Гарантираме реален пробег и техническа изправност без компромиси."
	},
	{
		icon: "ph-globe-hemisphere-west",
		title: "Ексклузивен внос",
		desc: "Достъп до лимитирани серии и конфигурации директно от официални представителства в Германия и цяла Европа."
	},
		{
		icon: "ph-handshake",
		title: "Лично отношение",
		desc: "Ние не продаваме просто коли – ние изграждаме връзка. Вашият личен консултант е с Вас от избора до връчването на ключа."
	}
];
---

<Layout title="Начало">
<section id="hero" class="relative h-screen w-full overflow-hidden flex items-center justify-center">
	<video 
		src="/lambo.mp4" 
		autoplay 
		loop 
		muted 
		playsinline
		class="absolute inset-0 w-full h-full object-cover z-0"
	></video>

	<div class="gradient z-10"></div>

	<div class="relative z-20 container mx-auto px-6 text-center flex flex-col items-center gap-8">
		<h1 class="title">
			Изкуството на движението. 
			<br />
			Безкомпромисен лукс.
		</h1>

		<p class="subtitle">
		Открийте селекция от премиум автомобили, които не просто Ви превозват, 
		а дефинират статуса Ви. Внос, лизинг и безупречно обслужване.
		</p>

		<div class="flex flex-col sm:flex-row gap-4 mt-8">
		<a href="/services" class="btn btn-fill">
			Нашите Услуги
		</a>
		<a href="/collection/1" class="btn btn-outline">
			Разгледайте колекцията
		</a>
		</div>
	</div>

	<div class="absolute bottom-10 animate-bounce z-20 text-white/70">
		<i class="ph ph-arrow-down text-3xl"></i>
	</div>
</section>

<section id="why-autolux" class="py-24 bg-bg-primary text-white relative">
	<div class="container mx-auto px-6">
		<div class="section-header">
			<span class="section-subtitle">Защо AutoLux?</span>
			<h2 class="section-title">Нашите ценности</h2>
		</div>

		<div class="grid grid-cols-1 md:grid-cols-3 gap-12">
		{
			values.map((value) => (
				<HoverCard icon={value.icon} title={value.title} desc={value.desc} />
			))
		}
		</div>

		<div class="w-full py-12 relative">
		<div class="text-center mb-10">
			<span class="text-text-secondary text-sm uppercase tracking-widest font-bold">Официални партньори</span>
		</div>

		<div class="overflow-hidden flex">
			<div class="animate-marquee flex gap-20 items-center px-8">
				{[...brands, ...brands].map((brand) => (
					<a 
					href={brand.url} 
					target="_blank" 
					rel="noopener noreferrer"
					class="group marquee relative block transition-all duration-300 opacity-20 hover:opacity-100 hover:scale-110"
					title={`Посети сайта на ${brand.name}`}
					>
					<img 
						src={brand.logo} 
						alt={brand.name} 
						class="w-32 h-32" 
					/>
					<p class="uppercase text-sm mt-2">{brand.name}</p>
					
					</a>
				))}
			</div>
		</div>
		</div>
	</div>
</section>

<section id="collection" class="py-24 bg-bg-secondary text-white">
	<div class="container mx-auto px-6">
		<div class="section-header flex flex-col justify-stretch items-center mb-12">
			<h2 class="section-title">Актуални предложения</h2>
			<a href="/collection/1" class="hidden md:flex self-end items-center gap-2 text-primary hover:text-white transition-colors">
				Виж всички <i class="ph ph-arrow-right"></i>
			</a>
		</div>

		<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
		{carsWithImages.map((car) => (
			<CarCard car={car} />
		))}
		</div>
	</div>
</section>

<section class="py-20 text-white relative overflow-hidden">
	<img 
		src="/rs7.jpg"
		alt="Audi RS7"
		class="absolute top-0 left-0 w-full h-full object-cover z-0"
	/>

	<div class="absolute top-0 left-0 w-full h-full bg-black/90 z-10"></div>

	<div class="container mx-auto px-6 relative z-20 text-center">
		<h2 class="text-3xl md:text-5xl font-bold mb-6 max-w-4xl mx-auto">Готови ли сте да седнете зад волана на мечтите си?</h2>
		<p class="text-xl mb-10 font-medium text-text-secondary">Свържете се с нас за индивидуална консултация или тест драйв.</p>
		
		<div class="flex flex-col sm:flex-row justify-center gap-4">
			<a href="/contacts" class="btn btn-fill">
				Свържете се с нас
			</a>
			<a href="/contacts" class="btn btn-outline">
				<i class="ph ph-phone-call"></i>
				{urls.phone}
			</a>
		</div>
	</div>
</section>

</Layout>